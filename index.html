<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Puzzle #7 — Mystery Door (Room 301)</title>
  <style>
    body{
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
      background: #111;
      color: #eee;
    }
    .box{
      max-width: 800px;
      margin: 0 auto;
      background: #1b1b1b;
      border: 1px solid #333;
      border-radius: 10px;
      padding: 16px;
    }
    h1{ margin-top: 0; font-size: 20px; }
    p{ line-height: 1.4; }

    .panel{
      margin-top: 14px;
      padding: 12px;
      border: 1px dashed #555;
      border-radius: 10px;
      background: #141414;
    }

    .row{
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 10px;
    }

    input{
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #444;
      background: #0f0f0f;
      color: #eee;
      width: 220px;
    }

    button{
      padding: 10px 12px;
      border-radius: 8px;
      border: 1px solid #444;
      background: #222;
      color: #eee;
      cursor: pointer;
    }
    button:hover{ background: #2a2a2a; }
    button:disabled{
      opacity: 0.5;
      cursor: not-allowed;
    }

    #status{
      margin-top: 10px;
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #333;
      background: #181818;
    }

    .good{
      border-color: #2f855a;
      background: #102016;
    }
    .bad{
      border-color: #a13a3a;
      background: #221010;
    }

    a{ color: #eee; }
  </style>
</head>

<body>
  <div class="box">
    <h1>Puzzle #7: Mystery Door (Room 301)</h1>

    <p>
      You reach the unmarked door in Room 301. Instead of a handle, it has a glowing panel that reads:
      <strong>“UNREGISTERED ROOM — ACCESS REQUIRES FIELD BALANCING.”</strong>
    </p>

    <p>
      The panel is broken. It can’t balance itself. It asks for a <strong>stability code</strong>.
      Solve the puzzle and enter the correct code to unlock the door.
    </p>

    <div class="panel">
      <p><strong>Puzzle:</strong> Add the two numbers shown below. Type the sum as the stability code.</p>

      <p>
        Number A: <strong id="numA">?</strong><br>
        Number B: <strong id="numB">?</strong>
      </p>

      <div class="row">
        <input id="codeInput" type="text" placeholder="Enter stability code" />
        <button id="checkBtn" type="button">Check Code</button>
        <button id="newBtn" type="button">New Numbers</button>
        <button id="continueBtn" type="button" disabled>Continue → Auditorium</button>
      </div>

      <div id="status" role="status" aria-live="polite">
        Status: Door locked. Enter the correct stability code.
      </div>
    </div>
  </div>

  <script>
    // Simple puzzle: add two numbers.
    // Students can understand and modify this easily.

    var numA = 0;
    var numB = 0;

    var numAEl = document.getElementById("numA");
    var numBEl = document.getElementById("numB");
    var codeInput = document.getElementById("codeInput");
    var statusEl = document.getElementById("status");

    var checkBtn = document.getElementById("checkBtn");
    var newBtn = document.getElementById("newBtn");
    var continueBtn = document.getElementById("continueBtn");

    function setStatus(text, type){
      statusEl.textContent = text;
      statusEl.className = ""; // clear classes
      if(type === "good") statusEl.className = "good";
      if(type === "bad") statusEl.className = "bad";
    }

    function makeNumbers(){
      // Random numbers 1–9 for simplicity
      numA = Math.floor(Math.random() * 9) + 1;
      numB = Math.floor(Math.random() * 9) + 1;

      numAEl.textContent = numA;
      numBEl.textContent = numB;

      codeInput.value = "";
      continueBtn.disabled = true;

      setStatus("Status: Door locked. Add the numbers and enter the stability code.", "");
    }

    function checkCode(){
      var userText = codeInput.value.trim();
      var userNumber = Number(userText); // converts text to a number
      var correct = numA + numB;

      if(userText === ""){
        setStatus("Status: Please type a code before checking.", "bad");
        return;
      }

      if(userNumber === correct){
        setStatus("Congratulations! Code accepted. The Mystery Door unlocks. Next: Auditorium.", "good");
        continueBtn.disabled = false;

        // Optional: save solved state
        localStorage.setItem("puzzle-07", "solved");
      } else {
        setStatus("Not correct. The door stays locked. Try again.", "bad");
      }
    }

    function restoreSolved(){
      if(localStorage.getItem("puzzle-07") === "solved"){
        setStatus("Already solved! The door is unlocked. Next: Auditorium.", "good");
        continueBtn.disabled = false;
      }
    }

    checkBtn.addEventListener("click", checkCode);

    newBtn.addEventListener("click", function(){
      // If you want: clearing “solved” when new numbers appear
      localStorage.removeItem("puzzle-07");
      makeNumbers();
    });

    continueBtn.addEventListener("click", function(){
      window.location.href = "auditorium.html";
    });

    // Start the puzzle
    makeNumbers();
    restoreSolved();
  </script>
</body>
</html>
